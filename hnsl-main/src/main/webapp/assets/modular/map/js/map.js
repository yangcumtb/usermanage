var testList = [
    {
        'VALUE': '210100', 'TITLE': '沈阳', 'TYPE': 'province', 'CHILDREN': [
            {'VALUE': '210102', 'TITLE': '和平区', 'TYPE': 'city'},
            {'VALUE': '210103', 'TITLE': '沈河区', 'TYPE': 'city'},
            {'VALUE': '210104', 'TITLE': '大东区', 'TYPE': 'city'},
            {'VALUE': '210105', 'TITLE': '皇姑区', 'TYPE': 'city'},
            {'VALUE': '210106', 'TITLE': '铁西区', 'TYPE': 'city'},
            {'VALUE': '210111', 'TITLE': '苏家屯区', 'TYPE': 'city'},
            {'VALUE': '210112', 'TITLE': '浑南区', 'TYPE': 'city'},
            {'VALUE': '210113', 'TITLE': '沈新北区', 'TYPE': 'city'},
            {'VALUE': '210114', 'TITLE': '于洪区', 'TYPE': 'city'},
            {'VALUE': '210115', 'TITLE': '辽中区', 'TYPE': 'city'},
            {'VALUE': '210123', 'TITLE': '康平县', 'TYPE': 'city'},
            {'VALUE': '210124', 'TITLE': '法库县', 'TYPE': 'city'},
            {'VALUE': '210181', 'TITLE': '新民市', 'TYPE': 'city'},
            {'VALUE': '210190', 'TITLE': '经济技术开发区', 'TYPE': 'city'},
        ]
    },
    {
        'VALUE': '210200', 'TITLE': '大连', 'TYPE': 'province', 'CHILDREN': [
            {'VALUE': '210202', 'TITLE': '中山区', 'TYPE': 'city'},
            {'VALUE': '210203', 'TITLE': '西岗区', 'TYPE': 'city'},
            {'VALUE': '210204', 'TITLE': '沙河口区', 'TYPE': 'city'},
            {'VALUE': '210211', 'TITLE': '甘井子区', 'TYPE': 'city'},
            {'VALUE': '210212', 'TITLE': '旅顺口区', 'TYPE': 'city'},
            {'VALUE': '210213', 'TITLE': '金州区', 'TYPE': 'city'},
            {'VALUE': '210214', 'TITLE': '普兰店区', 'TYPE': 'city'},
            {'VALUE': '210224', 'TITLE': '长海县', 'TYPE': 'city'},
            {'VALUE': '210281', 'TITLE': '瓦房店市', 'TYPE': 'city'},
            {'VALUE': '210283', 'TITLE': '庄河市', 'TYPE': 'city'},
        ]
    },
    {
        'VALUE': '210300', 'TITLE': '鞍山', 'TYPE': 'province', 'CHILDREN': [
            {'VALUE': '210302', 'TITLE': '铁东区', 'TYPE': 'city'},
            {'VALUE': '210303', 'TITLE': '铁西区', 'TYPE': 'city'},
            {'VALUE': '210304', 'TITLE': '立山区', 'TYPE': 'city'},
            {'VALUE': '210311', 'TITLE': '千山区', 'TYPE': 'city'},
            {'VALUE': '210321', 'TITLE': '台安县', 'TYPE': 'city'},
            {'VALUE': '210323', 'TITLE': '岫岩满族自治县', 'TYPE': 'city'},
            {'VALUE': '210381', 'TITLE': '海城市', 'TYPE': 'city'},
            {'VALUE': '210390', 'TITLE': '高新区', 'TYPE': 'city'},
        ]
    },
    {
        'VALUE': '210400', 'TITLE': '抚顺', 'TYPE': 'province', 'CHILDREN': [
            {'VALUE': '210402', 'TITLE': '新抚区', 'TYPE': 'city'},
            {'VALUE': '210403', 'TITLE': '东洲区', 'TYPE': 'city'},
            {'VALUE': '210404', 'TITLE': '望花区', 'TYPE': 'city'},
            {'VALUE': '210411', 'TITLE': '顺城区', 'TYPE': 'city'},
            {'VALUE': '210421', 'TITLE': '抚顺县', 'TYPE': 'city'},
            {'VALUE': '210422', 'TITLE': '新宾满族自治县', 'TYPE': 'city'},
            {'VALUE': '210423', 'TITLE': '清原满族自治县', 'TYPE': 'city'},
        ]
    },
    {
        'VALUE': '210500', 'TITLE': '本溪', 'TYPE': 'province', 'CHILDREN': [
            {'VALUE': '210502', 'TITLE': '平山区', 'TYPE': 'city'},
            {'VALUE': '210503', 'TITLE': '溪湖区', 'TYPE': 'city'},
            {'VALUE': '210504', 'TITLE': '明山区', 'TYPE': 'city'},
            {'VALUE': '210505', 'TITLE': '南芬区', 'TYPE': 'city'},
            {'VALUE': '210521', 'TITLE': '本溪满族自治县', 'TYPE': 'city'},
            {'VALUE': '210522', 'TITLE': '桓仁满族自治县', 'TYPE': 'city'},
        ]
    },
    {
        'VALUE': '210600', 'TITLE': '丹东', 'TYPE': 'province', 'CHILDREN': [
            {'VALUE': '210602', 'TITLE': '元宝区', 'TYPE': 'city'},
            {'VALUE': '210603', 'TITLE': '振兴区', 'TYPE': 'city'},
            {'VALUE': '210604', 'TITLE': '振安区', 'TYPE': 'city'},
            {'VALUE': '210624', 'TITLE': '宽甸满族自治县', 'TYPE': 'city'},
            {'VALUE': '210681', 'TITLE': '东港市', 'TYPE': 'city'},
            {'VALUE': '210682', 'TITLE': '凤城市', 'TYPE': 'city'},
        ]
    },
    {
        'VALUE': '210700', 'TITLE': '锦州', 'TYPE': 'province', 'CHILDREN': [
            {'VALUE': '210702', 'TITLE': '古塔区', 'TYPE': 'city'},
            {'VALUE': '210703', 'TITLE': '凌河区', 'TYPE': 'city'},
            {'VALUE': '210711', 'TITLE': '太和区', 'TYPE': 'city'},
            {'VALUE': '210726', 'TITLE': '黑山县', 'TYPE': 'city'},
            {'VALUE': '210727', 'TITLE': '义县', 'TYPE': 'city'},
            {'VALUE': '210781', 'TITLE': '凌海市', 'TYPE': 'city'},
            {'VALUE': '210782', 'TITLE': '北镇市', 'TYPE': 'city'},
            {'VALUE': '210793', 'TITLE': '经济技术开发区', 'TYPE': 'city'},
        ]
    },
    {
        'VALUE': '210800', 'TITLE': '营口', 'TYPE': 'province', 'CHILDREN': [
            {'VALUE': '210802', 'TITLE': '站前区', 'TYPE': 'city'},
            {'VALUE': '210803', 'TITLE': '西市区', 'TYPE': 'city'},
            {'VALUE': '210804', 'TITLE': '鲅鱼圈区', 'TYPE': 'city'},
            {'VALUE': '210811', 'TITLE': '老边区', 'TYPE': 'city'},
            {'VALUE': '210881', 'TITLE': '盖州市', 'TYPE': 'city'},
            {'VALUE': '210882', 'TITLE': '大石桥市', 'TYPE': 'city'},
        ]
    },
    {
        'VALUE': '210900', 'TITLE': '阜新', 'TYPE': 'province', 'CHILDREN': [
            {'VALUE': '210902', 'TITLE': '海州区', 'TYPE': 'city'},
            {'VALUE': '210903', 'TITLE': '新邱区', 'TYPE': 'city'},
            {'VALUE': '210904', 'TITLE': '太平区', 'TYPE': 'city'},
            {'VALUE': '210905', 'TITLE': '清河门区', 'TYPE': 'city'},
            {'VALUE': '210911', 'TITLE': '细河区', 'TYPE': 'city'},
            {'VALUE': '210921', 'TITLE': '阜新蒙古族自治县', 'TYPE': 'city'},
            {'VALUE': '210922', 'TITLE': '彰武县', 'TYPE': 'city'},
        ]
    },
    {
        'VALUE': '211000', 'TITLE': '辽阳', 'TYPE': 'province', 'CHILDREN': [
            {'VALUE': '211002', 'TITLE': '白塔区', 'TYPE': 'city'},
            {'VALUE': '211003', 'TITLE': '文圣区', 'TYPE': 'city'},
            {'VALUE': '211004', 'TITLE': '宏伟区', 'TYPE': 'city'},
            {'VALUE': '211005', 'TITLE': '弓长岭区', 'TYPE': 'city'},
            {'VALUE': '211011', 'TITLE': '太子河区', 'TYPE': 'city'},
            {'VALUE': '211021', 'TITLE': '辽阳县', 'TYPE': 'city'},
            {'VALUE': '211081', 'TITLE': '灯塔市', 'TYPE': 'city'},
        ]
    },
    {
        'VALUE': '211100', 'TITLE': '盘锦', 'TYPE': 'province', 'CHILDREN': [
            {'VALUE': '211102', 'TITLE': '双台子区', 'TYPE': 'city'},
            {'VALUE': '211103', 'TITLE': '兴隆台区', 'TYPE': 'city'},
            {'VALUE': '211104', 'TITLE': '大洼区', 'TYPE': 'city'},
            {'VALUE': '211122', 'TITLE': '盘山县', 'TYPE': 'city'},
        ]
    },
    {
        'VALUE': '211200', 'TITLE': '铁岭', 'TYPE': 'province', 'CHILDREN': [
            {'VALUE': '211202', 'TITLE': '银州区', 'TYPE': 'city'},
            {'VALUE': '211204', 'TITLE': '清河区', 'TYPE': 'city'},
            {'VALUE': '211221', 'TITLE': '铁岭县', 'TYPE': 'city'},
            {'VALUE': '211223', 'TITLE': '西丰县', 'TYPE': 'city'},
            {'VALUE': '211224', 'TITLE': '昌图县', 'TYPE': 'city'},
            {'VALUE': '211281', 'TITLE': '调兵山市', 'TYPE': 'city'},
            {'VALUE': '211282', 'TITLE': '开原市', 'TYPE': 'city'},
        ]
    },
    {
        'VALUE': '211300', 'TITLE': '朝阳', 'TYPE': 'province', 'CHILDREN': [
            {'VALUE': '211302', 'TITLE': '双塔区', 'TYPE': 'city'},
            {'VALUE': '211303', 'TITLE': '龙城区', 'TYPE': 'city'},
            {'VALUE': '211321', 'TITLE': '朝阳县', 'TYPE': 'city'},
            {'VALUE': '211322', 'TITLE': '建平县', 'TYPE': 'city'},
            {'VALUE': '211324', 'TITLE': '喀喇沁左翼蒙古族自治县', 'TYPE': 'city'},
            {'VALUE': '211381', 'TITLE': '北票市', 'TYPE': 'city'},
            {'VALUE': '211382', 'TITLE': '凌源市', 'TYPE': 'city'},
        ]
    },
    {
        'VALUE': '211400', 'TITLE': '葫芦岛', 'TYPE': 'province', 'CHILDREN': [
            {'VALUE': '211402', 'TITLE': '连山区', 'TYPE': 'city'},
            {'VALUE': '211403', 'TITLE': '龙港区', 'TYPE': 'city'},
            {'VALUE': '211404', 'TITLE': '南票区', 'TYPE': 'city'},
            {'VALUE': '211421', 'TITLE': '绥中县', 'TYPE': 'city'},
            {'VALUE': '211422', 'TITLE': '建昌县', 'TYPE': 'city'},
            {'VALUE': '211481', 'TITLE': '兴城市', 'TYPE': 'city'},
        ]
    },
];
var needlist = [];
layui.config({
    cacheTab: false,
    base: Feng.ctxPath + '/assets/common/module/'
}).extend({
    regionCheckBox: 'regionCheckBox/regionCheckBox'
}).use(['layer', 'element', 'admin', 'util', 'form', 'HttpRequest', 'tree', 'regionCheckBox', 'carousel', 'table', 'xmSelect'], function () {
    var util = layui.util;
    var HttpRequest = layui.HttpRequest;
    var element = layui.element;
    var gisMap;
    var $ = layui.jquery;
    var admin = layui.admin;
    var tree = layui.tree;
    var regionCheckBox = layui.regionCheckBox;
    var carousel = layui.carousel;
    var form = layui.form;
    var table = layui.table;
    var xmSelect = layui.xmSelect;
    // var Info = {
    //     queryData: {}
    // };
    // Info.search = function () {
    //     Info.queryData.shlx = $("#shlx").val();
    //
    // };
    //多选三调地类及矿种，修复方向
    var sddl = xmSelect.render({
        el: '#sddl',
        theme: {
            color: '#8799a3',
        },
        autoRow: true,
        disabled: true,
        data: [
            {
                name: '耕地', children: [
                    {name: '耕地', value: '01', select: false},
                    {name: '水田', value: '0101', select: false},
                    {name: '水浇地', value: '0102', select: false},
                    {name: '旱地', value: '0103', select: false},
                ]
            },
            {
                name: '园地', children: [
                    {name: '园地', value: '02', select: false},
                    {name: '果园', value: '0201', select: false},
                    {name: '茶园', value: '0202', select: false},
                    {name: '橡胶园', value: '0203', select: false},
                    {name: '其他园地', value: '0204', select: false},
                ]
            },
            {
                name: '林地', children: [
                    {name: '林地', value: '03', select: false},
                    {name: '乔木林地', value: '0301', select: false},
                    {name: '竹林地', value: '0302', select: false},
                    {name: '红树林地', value: '0303', select: false},
                    {name: '森林沼泽', value: '0304', select: false},
                    {name: '灌木林地', value: '0305', select: false},
                    {name: '灌丛沼泽', value: '0306', select: false},
                    {name: '其他林地', value: '0307', select: false},
                ]
            },
            {
                name: '草地', children: [
                    {name: '草地', value: '04', select: false},
                    {name: '天然牧草地', value: '0401', select: false},
                    {name: '沼泽草地', value: '0402', select: false},
                    {name: '人工牧草地', value: '0403', select: false},
                    {name: '其他草地', value: '0404', select: false},
                ]
            },
            {
                name: '商服用地', children: [
                    {name: '商服用地', value: '05', select: false},
                    {name: '零售商业用地', value: '0501', select: false},
                    {name: '批发市场用地', value: '0502', select: false},
                    {name: '餐饮用地', value: '0503', select: false},
                    {name: '旅馆用地', value: '0504', select: false},
                    {name: '商务金融用地', value: '0505', select: false},
                    {name: '娱乐用地', value: '0506', select: false},
                    {name: '其他商服用地', value: '0507', select: false},
                ]
            },
            {
                name: '工矿仓储用地', children: [
                    {name: '工矿仓储用地', value: '06', select: false},
                    {name: '工业用地', value: '0601', select: false},
                    {name: '采矿用地', value: '0602', select: false},
                    {name: '盐田', value: '0603', select: false},
                    {name: '仓储用地', value: '0604', select: false},
                ]
            },
            {
                name: '住宅用地', children: [
                    {name: '住宅用地', value: '07', select: false},
                    {name: '城镇住宅用地', value: '0701', select: false},
                    {name: '农村宅基地', value: '0702', select: false},
                ]
            },
            {
                name: '公共管理与公共服务用地', children: [
                    {name: '公共管理与公共服务用地', value: '08', select: false},
                    {name: '机关团体用地', value: '0801', select: false},
                    {name: '新闻出版用地', value: '0802', select: false},
                    {name: '教育用地', value: '0803', select: false},
                    {name: '科研用地', value: '0804', select: false},
                    {name: '医疗卫生用地', value: '0805', select: false},
                    {name: '社会福利用地', value: '0806', select: false},
                    {name: '文体设施用地', value: '0807', select: false},
                    {name: '体育用地', value: '0808', select: false},
                    {name: '公共设施用地', value: '0809', select: false},
                    {name: '公园与绿地', value: '0810', select: false},
                ]
            },
            {
                name: '特殊用地', children: [
                    {name: '特殊用地', value: '09', select: false},
                    {name: '军事设施用地', value: '0901', select: false},
                    {name: '使领馆用地', value: '0902', select: false},
                    {name: '监教场所用地', value: '0903', select: false},
                    {name: '宗教用地', value: '0904', select: false},
                    {name: '殡葬用地', value: '0905', select: false},
                    {name: '风景名胜设施用地', value: '0906', select: false},
                ]
            },
            {
                name: '交通运输用地', children: [
                    {name: '交通运输用地', value: '10', select: false},
                    {name: '铁路用地', value: '1001', select: false},
                    {name: '轨道交通用地', value: '1002', select: false},
                    {name: '公路用地', value: '1003', select: false},
                    {name: '城镇村道路用地', value: '1004', select: false},
                    {name: '交通服务场站用地', value: '1005', select: false},
                    {name: '农村道路', value: '1006', select: false},
                    {name: '机场用地', value: '1007', select: false},
                    {name: '港口码头用地', value: '1008', select: false},
                    {name: '管道运输用地', value: '1009', select: false},
                ]
            },
            {
                name: '水域及水利设施用地', children: [
                    {name: '水域及水利设施用地', value: '11', select: false},
                    {name: '河流水面', value: '1101', select: false},
                    {name: '湖泊水面', value: '1102', select: false},
                    {name: '水库水面', value: '1103', select: false},
                    {name: '坑塘水面', value: '1104', select: false},
                    {name: '沿海滩涂', value: '1105', select: false},
                    {name: '内陆滩涂', value: '1106', select: false},
                    {name: '沟渠', value: '1107', select: false},
                    {name: '沼泽地', value: '1108', select: false},
                    {name: '水工建筑用地', value: '1109', select: false},
                    {name: '冰川及永久积雪', value: '1110', select: false},
                ]
            },
            {
                name: '其他土地', children: [
                    {name: '其他土地', value: '12', select: false},
                    {name: '空闲地', value: '1201', select: false},
                    {name: '设施农用地', value: '1202', select: false},
                    {name: '田坎', value: '1203', select: false},
                    {name: '盐碱地', value: '1204', select: false},
                    {name: '沙地', value: '1205', select: false},
                    {name: '裸土地', value: '1206', select: false},
                    {name: '裸岩石砾地', value: '1207', select: false},
                ]
            },
        ],
    });
    var kz = xmSelect.render({
        el: '#kz',
        theme: {
            color: '#8799a3'
        },
        autoRow: true,
        disabled: true,
        filterable: true,
        filterMethod: function (val, item, index, prop) {
            if (val == item.value) {//把value相同的搜索出来
                return true;
            }
            if (item.name.indexOf(val) != -1) {//名称中包含的搜索出来
                return true;
            }
            return false;//不知道的就不管了
        },
        data: [
            {name: '煤', value: '11001', select: false},
            {name: '油页岩', value: '11002', select: false},
            {name: '石油', value: '11003', select: false},
            {name: '天然气', value: '11004', select: false},
            {name: '煤层气', value: '11005', select: false},
            {name: '石煤', value: '11006', select: false},
            {name: '油砂', value: '11008', select: false},
            {name: '铀', value: '12712', select: false},
            {name: '钍', value: '12713', select: false},
            {name: '天然沥青', value: '14970', select: false},
            {name: '地热', value: '17050', select: false},
            {name: '铁矿', value: '22001', select: false},
            {name: '锰矿', value: '22002', select: false},
            {name: '铬铁矿', value: '22003', select: false},
            {name: '钛矿', value: '22004', select: false},
            {name: '钒矿', value: '22005', select: false},
            {name: '金红石', value: '22006', select: false},
            {name: '铜矿', value: '32006', select: false},
            {name: '铅矿', value: '32007', select: false},
            {name: '锌矿', value: '32008', select: false},
            {name: '铝土矿', value: '32009', select: false},
            {name: '镁矿', value: '32011', select: false},
            {name: '镍矿', value: '32012', select: false},
            {name: '钴矿', value: '32013', select: false},
            {name: '钨矿', value: '32014', select: false},
            {name: '锡矿', value: '32015', select: false},
            {name: '铋矿', value: '32016', select: false},
            {name: '钼矿', value: '32017', select: false},
            {name: '汞矿', value: '32018', select: false},
            {name: '锑矿', value: '32019', select: false},
            {name: '多金属', value: '32020', select: false},
            {name: '铂矿', value: '42101', select: false},
            {name: '钯矿', value: '42102', select: false},
            {name: '铱矿', value: '42103', select: false},
            {name: '铑矿', value: '42104', select: false},
            {name: '锇矿', value: '42105', select: false},
            {name: '钌矿', value: '42106', select: false},
            {name: '砂金', value: '42200', select: false},
            {name: '金矿', value: '42201', select: false},
            {name: '银矿', value: '42202', select: false},
            {name: '铌钽矿', value: '52300', select: false},
            {name: '铌矿', value: '52301', select: false},
            {name: '钽矿', value: '52302', select: false},
            {name: '铍矿', value: '52401', select: false},
            {name: '锂矿', value: '52402', select: false},
            {name: '锆矿', value: '52403', select: false},
            {name: '锶矿(天青石)', value: '52404', select: false},
            {name: '铷矿', value: '52405', select: false},
            {name: '铯矿', value: '52406', select: false},
            {name: '重稀土矿', value: '52500', select: false},
            {name: '钇矿', value: '52501', select: false},
            {name: '钆矿', value: '52502', select: false},
            {name: '铽矿', value: '52503', select: false},
            {name: '镝矿', value: '52504', select: false},
            {name: '钬矿', value: '52505', select: false},
            {name: '铒矿', value: '52506', select: false},
            {name: '铥矿', value: '52507', select: false},
            {name: '镱矿', value: '52508', select: false},
            {name: '镥矿', value: '52509', select: false},
            {name: '轻稀土矿', value: '52600', select: false},
            {name: '铈矿', value: '52601', select: false},
            {name: '镧矿', value: '52602', select: false},
            {name: '镨矿', value: '52603', select: false},
            {name: '钕矿', value: '52604', select: false},
            {name: '钐矿', value: '52605', select: false},
            {name: '铕矿', value: '52606', select: false},
            {name: '锗矿', value: '52701', select: false},
            {name: '镓矿', value: '52702', select: false},
            {name: '铟矿', value: '52703', select: false},
            {name: '铊矿', value: '52704', select: false},
            {name: '铪矿', value: '52705', select: false},
            {name: '铼矿', value: '52706', select: false},
            {name: '镉矿', value: '52707', select: false},
            {name: '钪矿', value: '52708', select: false},
            {name: '硒矿', value: '52709', select: false},
            {name: '碲矿', value: '52711', select: false},
            {name: '蓝晶石', value: '63200', select: false},
            {name: '硅线石', value: '63210', select: false},
            {name: '红柱石', value: '63220', select: false},
            {name: '菱镁矿', value: '63640', select: false},
            {name: '萤石(普通)', value: '63701', select: false},
            {name: '熔剂用石灰岩', value: '63904', select: false},
            {name: '冶金用白云岩', value: '63941', select: false},
            {name: '冶金用石英岩', value: '63951', select: false},
            {name: '冶金用砂岩', value: '63971', select: false},
            {name: '铸型用砂岩', value: '63976', select: false},
            {name: '铸型用砂', value: '63992', select: false},
            {name: '冶金用脉石英', value: '64031', select: false},
            {name: '耐火粘土', value: '64190', select: false},
            {name: '铁钒土', value: '64310', select: false},
            {name: '其它粘土', value: '64410', select: false},
            {name: '铸型用粘土', value: '64411', select: false},
            {name: '耐火用橄榄岩', value: '64511', select: false},
            {name: '熔剂用蛇纹岩', value: '64531', select: false},
            {name: '自然硫', value: '73030', select: false},
            {name: '硫铁矿', value: '73070', select: false},
            {name: '钠硝石', value: '73240', select: false},
            {name: '明矾石', value: '73500', select: false},
            {name: '芒硝(含钙芒硝)', value: '73510', select: false},
            {name: '重晶石', value: '73530', select: false},
            {name: '毒重石', value: '73600', select: false},
            {name: '天然碱(Na2CO3)', value: '73610', select: false},
            {name: '赭石', value: '73860', select: false},
            {name: '颜料矿物', value: '73870', select: false},
            {name: '颜料黄土', value: '73880', select: false},
            {name: '电石用灰岩', value: '73901', select: false},
            {name: '制碱用灰岩', value: '73902', select: false},
            {name: '化肥用石灰岩', value: '73903', select: false},
            {name: '化肥用白云岩', value: '73942', select: false},
            {name: '化肥用石英岩', value: '73953', select: false},
            {name: '化肥用砂岩', value: '73975', select: false},
            {name: '含钾岩石', value: '74080', select: false},
            {name: '含钾砂页岩', value: '74090', select: false},
            {name: '化肥用橄榄岩', value: '74512', select: false},
            {name: '化肥用蛇纹岩', value: '74532', select: false},
            {name: '泥炭', value: '74950', select: false},
            {name: '钾盐', value: '75550', select: false},
            {name: '岩盐', value: '75511', select: false},
            {name: '湖盐', value: '75512', select: false},
            {name: '镁盐', value: '75530', select: false},
            {name: '天然卤水', value: '75540', select: false},
            {name: '碘', value: '75610', select: false},
            {name: '溴', value: '75630', select: false},
            {name: '砷', value: '75650', select: false},
            {name: '磷矿(主矿、共生矿)', value: '75690', select: false},
            {name: '金刚石', value: '83010', select: false},
            {name: '水晶', value: '83100', select: false},
            {name: '压电水晶', value: '83101', select: false},
            {name: '熔炼水晶', value: '83102', select: false},
            {name: '光学水晶', value: '83103', select: false},
            {name: '工艺水晶', value: '83104', select: false},
            {name: '蓝石棉', value: '83270', select: false},
            {name: '云母', value: '83280', select: false},
            {name: '电气石', value: '83300', select: false},
            {name: '方解石', value: '83620', select: false},
            {name: '冰洲石', value: '83630', select: false},
            {name: '光学萤石', value: '83702', select: false},
            {name: '硼矿', value: '85670', select: false},
            {name: '石墨', value: '83020', select: false},
            {name: '刚玉', value: '83110', select: false},
            {name: '硅灰石', value: '83230', select: false},
            {name: '滑石', value: '83250', select: false},
            {name: '石棉(温石棉)', value: '83260', select: false},
            {name: '长石', value: '83290', select: false},
            {name: '石榴子石', value: '83310', select: false},
            {name: '黄玉', value: '83320', select: false},
            {name: '叶腊石', value: '83330', select: false},
            {name: '透辉石', value: '83340', select: false},
            {name: '蛭石', value: '83350', select: false},
            {name: '沸石', value: '83360', select: false},
            {name: '透闪石', value: '83370', select: false},
            {name: '石膏', value: '83520', select: false},
            {name: '宝石', value: '83750', select: false},
            {name: '玉石', value: '83800', select: false},
            {name: '玛瑙', value: '83850', select: false},
            {name: '石灰岩', value: '83900', select: false},
            {name: '玻璃用灰岩', value: '83905', select: false},
            {name: '水泥用灰岩', value: '83906', select: false},
            {name: '建筑石料用灰岩', value: '83907', select: false},
            {name: '饰面用灰岩', value: '83908', select: false},
            {name: '制灰用灰岩', value: '83909', select: false},
            {name: '含钾岩石', value: '83910', select: false},
            {name: '泥灰岩', value: '83920', select: false},
            {name: '白垩', value: '83930', select: false},
            {name: '白云岩', value: '83940', select: false},
            {name: '玻璃用白云岩', value: '83943', select: false},
            {name: '建筑用白云岩', value: '83944', select: false},
            {name: '建筑用白云岩', value: '83945', select: false},
            {name: '石英岩', value: '83950', select: false},
            {name: '冶金用石英岩', value: '83951', select: false},
            {name: '玻璃用石英岩', value: '83952', select: false},
            {name: '砂岩', value: '83970', select: false},
            {name: '玻璃用砂岩', value: '83972', select: false},
            {name: '水泥配料用砂岩', value: '83973', select: false},
            {name: '砖瓦用砂岩', value: '83974', select: false},
            {name: '陶瓷用砂岩', value: '83977', select: false},
            {name: '建筑用砂岩', value: '83978', select: false},
            {name: '天然石英砂', value: '83990', select: false},
            {name: '玻璃用砂', value: '83991', select: false},
            {name: '海砂', value: '83992', select: false},
            {name: '建筑用砂', value: '83993', select: false},
            {name: '水泥配料用砂', value: '83994', select: false},
            {name: '水泥标准砂', value: '83995', select: false},
            {name: '砖瓦用砂', value: '83996', select: false},
            {name: '脉石英', value: '84030', select: false},
            {name: '玻璃用脉石英', value: '84032', select: false},
            {name: '粉石英', value: '84050', select: false},
            {name: '天然油石', value: '84070', select: false},
            {name: '硅藻土', value: '84110', select: false},
            {name: '页岩', value: '84130', select: false},
            {name: '陶粒页岩', value: '84131', select: false},
            {name: '砖瓦用页岩', value: '84132', select: false},
            {name: '水泥配料用页岩', value: '84133', select: false},
            {name: '建筑用页岩', value: '84134', select: false},
            {name: '高岭土', value: '84150', select: false},
            {name: '陶瓷土', value: '84170', select: false},
            {name: '凹凸棒石粘土', value: '84210', select: false},
            {name: '海泡石粘土', value: '84230', select: false},
            {name: '伊利石粘土', value: '84250', select: false},
            {name: '累托石粘土', value: '84270', select: false},
            {name: '膨润土', value: '84290', select: false},
            {name: '砖瓦用粘土', value: '84412', select: false},
            {name: '陶粒用粘土', value: '84413', select: false},
            {name: '水泥用粘土', value: '84414', select: false},
            {name: '水泥配料用红土', value: '84415', select: false},
            {name: '水泥配料用黄土', value: '84416', select: false},
            {name: '水泥配料用泥岩', value: '84417', select: false},
            {name: '保温材料用粘土', value: '84418', select: false},
            {name: '白云母粘土矿', value: '84419', select: false},
            {name: '橄榄岩', value: '84510', select: false},
            {name: '建筑用橄榄岩', value: '84513', select: false},
            {name: '蛇纹岩', value: '84530', select: false},
            {name: '饰面用蛇纹岩', value: '84533', select: false},
            {name: '建筑用辉石岩', value: '84542', select: false},
            {name: '玄武岩', value: '84550', select: false},
            {name: '铸石用玄武岩', value: '84551', select: false},
            {name: '岩棉用玄武岩', value: '84552', select: false},
            {name: '饰面用玄武岩', value: '84553', select: false},
            {name: '建筑用玄武岩', value: '84555', select: false},
            {name: '饰面用角闪岩', value: '84561', select: false},
            {name: '建筑用角闪岩', value: '84562', select: false},
            {name: '辉绿岩', value: '84570', select: false},
            {name: '水泥用辉绿岩', value: '84571', select: false},
            {name: '铸石用辉绿岩', value: '84572', select: false},
            {name: '饰面用辉绿岩', value: '84573', select: false},
            {name: '建筑用辉绿岩', value: '84574', select: false},
            {name: '饰面用辉长岩', value: '84581', select: false},
            {name: '建筑用辉长岩', value: '84582', select: false},
            {name: '安山岩', value: '84590', select: false},
            {name: '饰面用安山岩', value: '84591', select: false},
            {name: '建筑用安山岩', value: '84592', select: false},
            {name: '水泥混合材料用安山岩', value: '84593', select: false},
            {name: '耐酸碱用安山岩', value: '84594', select: false},
            {name: '闪长岩', value: '84610', select: false},
            {name: '建筑用闪长岩', value: '84611', select: false},
            {name: '饰面用闪长岩', value: '84613', select: false},
            {name: '饰面用二长岩', value: '84621', select: false},
            {name: '建筑用二长岩', value: '84622', select: false},
            {name: '饰面用正长岩', value: '84631', select: false},
            {name: '建筑用正长岩', value: '84632', select: false},
            {name: '花岗岩', value: '84710', select: false},
            {name: '建筑用花岗石', value: '84711', select: false},
            {name: '饰面用花岗岩', value: '84712', select: false},
            {name: '麦饭石', value: '84720', select: false},
            {name: '珍珠岩', value: '84730', select: false},
            {name: '建筑用流纹岩', value: '84740', select: false},
            {name: '黑曜岩', value: '84750', select: false},
            {name: '松脂岩', value: '84770', select: false},
            {name: '浮石', value: '84790', select: false},
            {name: '粗面岩', value: '84810', select: false},
            {name: '水泥用粗面岩', value: '84811', select: false},
            {name: '铸石用粗面岩', value: '84812', select: false},
            {name: '霞石正长岩', value: '84830', select: false},
            {name: '凝灰岩', value: '84850', select: false},
            {name: '玻璃用凝灰岩', value: '84851', select: false},
            {name: '水泥用凝灰岩', value: '84852', select: false},
            {name: '建筑用凝灰岩', value: '84853', select: false},
            {name: '火山灰', value: '84870', select: false},
            {name: '水泥用火山灰', value: '84871', select: false},
            {name: '火山渣', value: '84890', select: false},
            {name: '大理岩', value: '84910', select: false},
            {name: '饰面用大理石', value: '84911', select: false},
            {name: '建筑大理石', value: '84912', select: false},
            {name: '水泥用大理石', value: '84913', select: false},
            {name: '玻璃用大理石', value: '84914', select: false},
            {name: '板岩', value: '84920', select: false},
            {name: '饰面用板岩', value: '84921', select: false},
            {name: '水泥配料用板岩', value: '84922', select: false},
            {name: '片石', value: '84923', select: false},
            {name: '片麻岩', value: '84930', select: false},
            {name: '千枚岩', value: '84940', select: false},
            {name: '砚石', value: '86610', select: false},
            {name: '贝壳', value: '86620', select: false},
            {name: '矿泉水', value: '97010', select: false},
            {name: '地下水', value: '97030', select: false},
            {name: '二氧化碳气', value: '97070', select: false},
            {name: '硫化氢气', value: '97090', select: false},
            {name: '氦气', value: '97110', select: false},
            {name: '氢气', value: '97120', select: false},
            {name: '氡气', value: '97130', select: false},
            {name: '其他矿产', value: '99999', select: false},

        ]
    })
    var nxffx = xmSelect.render({
        el: '#nxffx',
        theme: {
            color: '#8799a3',
        },
        autoRow: true,
        disabled: true,
        data: [
            {name: '耕地', value: '1', selected: false},
            {name: '园地', value: '2', selected: false},
            {name: '林地', value: '3', selected: false},
            {name: '草地', value: '4', selected: false},
            {name: '商服用地', value: '5', selected: false},
            {name: '工矿仓储用地', value: '6', selected: false},
            {name: '住宅用地', value: '7', selected: false},
            {name: '公共管理与公共服务用地', value: '8', selected: false},
            {name: '特殊用地', value: '9', selected: false},
            {name: '交通运输用地', value: '10', selected: false},
            {name: '水域及水利设施用地', value: '11', selected: false},
            {name: '其他土地', value: '12', selected: false},
            {name: '/', value: '13', selected: false},
        ],
    });
    var Portrait = {
        tableId: "test",
        queryData: {
            "year": "2022",
            "type": "正射影像图",
            "format": "tiif",
        }
    }
    Portrait.initColumn = function () {
        return [[
            {field: 'year', width: 80, title: '年份'}
            , {field: 'type', width: 130, title: '类型'}
            , {field: 'format', width: 80, title: '格式'}
            , {align: 'center', fixed: 'right', width: 130, toolbar: '#tableBar', title: '操作'}
        ]];
    };
    var tableResult = table.render({
        elem: '#' + Portrait.tableId,
        page: true,
        limit: 100,
        data: [{
            "year": "2022",
            "type": "正射影像图",
            "format": "tiif",
        }],
        height: "full-100",
        cellMinWidth: 80,
        cols: Portrait.initColumn()
    });


    //城市复选框,根据用户筛选
    var ajax = new HttpRequest(Feng.ctxPath + "/map/loginDetail/", "get");
    var Dis = ajax.start();
    console.log(Dis)
    if (Dis.data.userLevel == "省级") {
        //城市复选框
        regionTest = regionCheckBox.render({
            elem: '#region',
            name: 'region',
            data: testList,
            all: null,
            // 初始化完成时执行
            ready: function () {
            },
            // 点击复选框时执行
            change: function (result) {
                $('#click2').html(result.value);
                $('#all2').html(getAllChecked(this.name));
            }
        });
    } else if (Dis.data.userLevel == "市级") {
        var Disnumber = parseInt(Dis.data.adcode.substring(2, 4));
        for (var i = 1; i < 15; i++) {
            if (Disnumber == i) {
                needlist = testList[i - 1].CHILDREN
                console.log(needlist)
                break
            }
        }
        for (var i = 0; i < needlist.length; i++) {
            needlist[i].TYPE = "province"
        }
        regionTest = regionCheckBox.render({
            elem: '#region',
            name: 'region',
            data: needlist,
            all: null,
            // 初始化完成时执行
            ready: function () {
            },
            // 点击复选框时执行
            change: function (result) {
                $('#click2').html(result.value);
                $('#all2').html(getAllChecked(this.name));
            }
        });
    } else if (Dis.data.userLevel == "县级") {
        $(".choice").css("display", "none")
        $(".District").html("<button type=\"button\" class=\"layui-btn layui-btn-primary\" id=\"Btnsearch\"\n" +
            "                            style=\"background-color: #33549988;\"><i class=\"layui-icon\">&#xe615;</i>搜索\n" +
            "                    </button>\n" +
            "                    <button type=\"button\" class=\"layui-btn layui-btn-primary\" id=\"reset\"><i\n" +
            "                            class=\"layui-icon\">&#xe669;</i>重置\n" +
            "                    </button>")
        var Citynumber = parseInt(Dis.data.adcode.substring(2, 4));
        var Countynumber = parseInt(Dis.data.adcode.substring(0, 6));
        console.log(Citynumber)
        console.log(Countynumber)
        for (var i = 1; i < 15; i++) {
            if (Citynumber == i) {
                needlist = testList[i - 1].CHILDREN
                console.log(needlist)
                break
            }
        }
        for (var i = 0; i < needlist.length; i++) {
            if (Countynumber == needlist[i].VALUE) {
                var Countyname = needlist[i].TITLE
                console.log(Countyname)
                break
            }
        }
    }

    function getAllChecked(name) {
        var all = '';
        $("input:checkbox[name=" + name + "]:checked").each(function () {
            all += this.title + ',';
        });
        return all.substring(0, all.length - 1);
    }


    // carousel.render({
    //     elem: '#photo'
    //     , arrow: 'always'
    //     , width: "100%"
    //     , height: "300px"
    //     , indicator: 'inside'
    // });
    var MyLayers = new L.layerGroup();

    //创建地图
    function initMap() {
        var normalm = L.tileLayer.chinaProvider('GaoDe.Normal.Map', {
            maxZoom: 18,
            minZoom: 1
        });
        var imgm = L.tileLayer.chinaProvider('GaoDe.Satellite.Map', {
            maxZoom: 18,
            minZoom: 1
        });
        var imga = L.tileLayer.chinaProvider('GaoDe.Satellite.Annotion', {
            maxZoom: 18,
            minZoom: 1
        });

        /**
         * 定义窗口活动范围
         */
        var normalLayer = L.layerGroup([normalm]);
        var imageLayer = L.layerGroup([imgm, imga]);
        var cor1 = L.latLng(48.30462108, 109.03515625);
        var cor2 = L.latLng(35.80251791, 135.34472656);
        var bounds = L.latLngBounds(cor1, cor2); //构建视图限制范围
        gisMap = new L.map('mapDiv',
            {
                zoom: 13,
                center: [41.67, 123.45],
                layers: [imageLayer],
                zoomControl: false,
                attributionControl: false,
                maxBounds: bounds,
                minZoom: 5,
                maxZoom: 18,
                preferCanvas: true
            });
        //gisMap.on('click', onMapClick);
        gisMap.on('mousemove', (e) => {
            let latlng = e.latlng;
            $("#lng").text(latlng.lng.toFixed(8));
            $("#lat").text(latlng.lat.toFixed(8));
        });
        //图层切换
        form.on('checkbox(planet)', function (data) {
            if (data.elem.checked == true) {
                $("#zone").prop("checked", false);
                if (gisMap.hasLayer(normalLayer)) {
                    gisMap.removeLayer(normalLayer);
                }
                if (!gisMap.hasLayer(imageLayer)) {
                    gisMap.addLayer(imageLayer);
                }
                form.render();
            }
        })
        form.on('checkbox(zone)', function (data) {
            if (data.elem.checked == true) {
                $("#planet").prop("checked", false);
                if (gisMap.hasLayer(imageLayer)) {
                    gisMap.removeLayer(imageLayer);
                }
                if (!gisMap.hasLayer(normalLayer)) {
                    gisMap.addLayer(normalLayer);
                }
                form.render();
            }
        })

        // L.marker([41.677142, 123.464918]).addTo(gisMap);
        L.control.zoom({
            zoomInTitle: '放大',
            zoomOutTitle: '缩小',
            position: 'bottomright'
        }).addTo(gisMap);

        $("li.basemap_item").on("click", function (event) {
            changeBaseMap(event.target);
        });
    }

    initMap();
    //各类监听
    $("#cardHeader").click(function () {
        var content = document.getElementById("content");
        if (content.style.display == "") {
            $("#content").css("display", "none");
            $("#expand").css("transform", "rotate(270deg)")
        } else {
            $("#content").css("display", "");
            $("#expand").css("transform", "rotate(0deg)")
        }

    })
    $("#product").click(function () {
        var productc = document.getElementById("productC");
        if (productc.style.display == "") {
            $("#productC").css("display", "none");
        } else {
            $("#productC").css("display", "");
        }
    })
    $("#history").click(function () {
        var historyc = document.getElementById("historyC");
        if (historyc.style.display == "") {
            $("#historyC").css("display", "none");
        } else {
            $("#historyC").css("display", "");
        }
    })
    $("#lake").click(function () {
        var lakec = document.getElementById("lakeC");
        if (lakec.style.display == "") {
            $("#lakeC").css("display", "none");
        } else {
            $("#lakeC").css("display", "");
        }
    })
    $("#land").click(function () {
        var landc = document.getElementById("landC");
        if (landc.style.display == "") {
            $("#landC").css("display", "none");
        } else {
            $("#landC").css("display", "");
        }
    })
    $("#resultexpand").click(function () {
        var cexpand = document.getElementById("cexpand");
        if (cexpand.style.display == "") {
            $("#cexpand").css("display", "none");
            $("#resultexpand").css("left", "0px");
            $("#search").css("margin-left", "40px")
            $("#resultexpand").css("transform", "rotate(90deg)")
        } else {
            $("#cexpand").css("display", "");
            $("#resultexpand").css("left", "370px");
            $("#search").css("margin-left", "420px")
            $("#resultexpand").css("transform", "rotate(270deg)")
        }
    })
    $("#detail").click(function () {
        var layers = document.getElementById("Layers");
        if (layers.style.display == "") {
            $("#detail").attr("src", "/spotmanage/assets/expand/images/detailclose.png")
            $("#Layers").css("display", "none");
            $("#detailpanel").css("display", "none");
            $("#a").empty();
            $("#a2").empty();
            $(".MC").reset();
            $(".tuban").reset();
            form.render();
        } else {
            $("#detail").attr("src", "/spotmanage/assets/expand/images/detailopen.png")
            $("#Layers").css("display", "");
            $("#detailpanel").css("display", "");
        }
    })
    $("#reset").click(function () {
        if (Dis.data.userLevel == "市级" || Dis.data.userLevel == "省级") {
            regionTest.reload();
        }
        if (Object.keys(MyLayers._layers).length != 0) {
            MyLayers.clearLayers()
        }
        $('#all2').html("");
        $("#searchNum").html("")
        $("#SCKS").prop("checked", false);
        $("#LSYL").prop("checked", false);
        $("#SSLT").prop("checked", false);
        $("#TDSH").prop("checked", false);
        $("#SC").css("display", "none")
        $("#Sbeginyear").val("");
        $("#Sendyear").val("");
        $("#SYXF").prop("checked", false);
        $("#SSH").prop("checked", false);
        $("#SKQBJ").prop("checked", false);
        $("#LS").css("display", "none")
        $("#Lbeginyear").val("");
        $("#Lendyear").val("");
        $("#tbbh").val("");
        $("#XFZ").prop("checked", false);
        $("#WXF").prop("checked", false);
        $("#XF").prop("checked", false);
        $("#SS").css("display", "none")
        $("#SSbeginyear").val("");
        $("#SSendyear").val("");
        $("#SSWC").prop("checked", false);
        $("#SSWWC").prop("checked", false);
        $("#SSZY").prop("checked", false);
        $("#SSPT").prop("checked", false);
        $("#TD").css("display", "none")
        $("#Tbeginyear").val("");
        $("#Tendyear").val("");
        $("#TWC").prop("checked", false);
        $("#TWWC").prop("checked", false);
        $("#TZY").prop("checked", false);
        $("#TPT").prop("checked", false);
        $("#cexpand").css("display", "none");
        $("#resultexpand").css("left", "0px");
        $("#search").css("margin-left", "40px")
        $("#resultexpand").css("transform", "rotate(90deg)")
        $("#resultlist").empty();
        $("#detailpanel").css("display", "none")
        form.render();
    })
    form.on('checkbox(SCKS)', function (data) {
        if (data.elem.checked == true) {
            $("#SC").css("display", "")
        } else {
            $("#SC").css("display", "none")
            $("#Sbeginyear").val("");
            $("#Sendyear").val("");
            $("#SYXF").prop("checked", false);
            $("#SSH").prop("checked", false);
            $("#SKQBJ").prop("checked", false);
            form.render()
        }
    })
    form.on('checkbox(LSYL)', function (data) {
        if (data.elem.checked == true) {
            $("#LS").css("display", "")
        } else {
            $("#LS").css("display", "none")
            $("#Lbeginyear").val("");
            $("#Lendyear").val("");
            // $("#XFZ").prop("checked", false);
            $("#WXF").prop("checked", false);
            $("#XF").prop("checked", false);
            form.render()
        }
    })
    form.on('checkbox(SSLT)', function (data) {
        if (data.elem.checked == true) {
            $("#SS").css("display", "")
        } else {
            $("#SS").css("display", "none")
            $("#SSbeginyear").val("");
            $("#SSendyear").val("");
            $("#SSWC").prop("checked", false);
            $("#SSWWC").prop("checked", false);
            $("#SSZY").prop("checked", false);
            $("#SSPT").prop("checked", false);
            form.render()
        }
    })
    form.on('checkbox(TDSH)', function (data) {
        if (data.elem.checked == true) {
            $("#TD").css("display", "")
        } else {
            $("#TD").css("display", "none")
            $("#Tbeginyear").val("");
            $("#Tendyear").val("");
            $("#TWC").prop("checked", false);
            $("#TWWC").prop("checked", false);
            $("#TZY").prop("checked", false);
            $("#TPT").prop("checked", false);
            form.render()
        }
    })
    form.on('checkbox(SSWC)', function (data) {
        if (data.elem.checked == true) {
            $("#SSWWC").prop("checked", false);
            form.render();
        }
    })
    form.on('checkbox(SSWWC)', function (data) {
        if (data.elem.checked == true) {
            $("#SSWC").prop("checked", false);
            form.render();
        }
    })
    form.on('checkbox(SSZY)', function (data) {
        if (data.elem.checked == true) {
            $("#SSPT").prop("checked", false);
            form.render();
        }
    })
    form.on('checkbox(SSPT)', function (data) {
        if (data.elem.checked == true) {
            $("#SSZY").prop("checked", false);
            form.render();
        }
    })
    form.on('checkbox(TWWC)', function (data) {
        if (data.elem.checked == true) {
            $("#TWC").prop("checked", false);
            form.render();
        }
    })
    form.on('checkbox(TWC)', function (data) {
        if (data.elem.checked == true) {
            $("#TTWWC").prop("checked", false);
            form.render();
        }
    })
    form.on('checkbox(TZY)', function (data) {
        if (data.elem.checked == true) {
            $("#TPT").prop("checked", false);
            form.render();
        }
    })
    form.on('checkbox(TPT)', function (data) {
        if (data.elem.checked == true) {
            $("#TZY").prop("checked", false);
            form.render();
        }
    })

    function ClickToCard(data) {
        $("#detailpanel").css("display", "");
        var Data = data.target.feature;
        var TBDate = Data.id;
        $("#a").empty();
        $("#a2").empty();
        $("#detailpanel").css("display", "");
        $("#Layers").css("display", "");
        $("#detail").attr("src", "/spotmanage/assets/expand/images/detailopen.png")
        if (Data.properties.xmlx == "lsyl") {
            console.log(Data.properties)
            $("#xm").css("display", "");
            // $("#xm").addClass('layui-this')
            // $("#tb").removeClass('layui-this')
            // $("#tbnr").removeClass('layui-show')
            // $("#xmnr").addClass('layui-show')
            $("#xmmc").attr("value", Data.properties.xmmc);
            $("#xmdd").attr("value", Data.properties.xmdd);
            $("#yszzj").attr("value", Data.properties.yszzj);
            $("#sbzj").attr("value", Data.properties.sbzj);
            $("#xflx").attr("value", Data.properties.xflx);
            $("#zlnd").attr("value", Data.properties.zlnd);
            $("#tbmj").attr("value", Data.properties.tbmj);
            $("#xmbz").text(Data.properties.xmbz);
            var ajax = new HttpRequest(Feng.ctxPath + "/spot/lsyl/detail?id=" + TBDate, "get");
            var result = ajax.start();
            if (result.data.sddl != null) {
                sddl.append(result.data.sddl.split(','));
            }
            if (result.data.kz != null) {
                kz.append(result.data.kz.split(','));
            }
            if (result.data.nxffx != null) {
                nxffx.append(result.data.nxffx.split(','));
            }
            if (result.data.tbmj != null) {
                var tbmj = result.data.tbmj
                var tbmjM = 0.0015 * tbmj;
                $("[name='tbmjm']").val(tbmjM)
            }

            console.log(result)
            var TBdl = result.data.tbdl;
            if (TBdl == "10") {
                var Options = "<option value=\" \"></option>\n" +
                    "                    <option value=\"11\">无法确认治理恢复责任主体的无主废弃矿山</option>\n" +
                    "                    <option value=\"12\">由政府承担治理恢复责任的政策性关闭矿山</option>"
                var $Options = $(Options);
                $Options.appendTo($("#tbxl"));
                $("#lsylmassage").css("display", "")
            } else if (TBdl == "20") {
                $("#tbxl").append("<option value=\" \"></option>\n" +
                    "                    <option value=\"21\">由企业履行治理恢复责任的政策性关闭矿山</option>\n" +
                    "                    <option value=\"22\">由企业或个人履行治理恢复责任的有主废弃矿山</option>")
                $("#lsylmassage").css("display", "none")
            } else if (TBdl == "30") {
                $("#tbxl").append("<option value=\" \"></option>\n" +
                    "                    <option value=\"31\">生产矿山</option>\n" +
                    "                    <option value=\"32\">采矿权过期未注销矿山</option>\n" +
                    "                    <option value=\"33\">自然灾毁</option>\n" +
                    "                    <option value=\"34\">工程建设损毁</option>\n" +
                    "                    <option value=\"35\">河道采砂损毁</option>\n" +
                    "                    <option value=\"36\">尾矿库占用损毁</option>\n" +
                    "                    <option value=\"37\">未损毁</option>")
                $("#lsylmassage").css("display", "none")
            } else if (TBdl == "40") {
                $("#tbxl").append("<option value=\" \"></option>\n" +
                    "                    <option value=\"41\">有效矿业权范围内功能未损毁的采矿沉陷区</option>\n" +
                    "                    <option value=\"42\">过期未注销矿业权范围内功能未损毁的采矿沉陷区</option>\n" +
                    "                    <option value=\"43\">其他功能未损毁的采矿沉陷区</option>")
                $("#lsylmassage").css("display", "none")
            }
            form.val('tuban', result.data);
            if (result.data.xczp != null) {
                var imageId = result.data.xczp.split(',');
                var L = imageId.length;
                if (result.data.qtdz != null) {
                    var TP = result.data.qtdz.split(',');
                    var Le = TP.length;
                    for (var ii = 0; ii < Le - 1; ii++) {
                        if (TP[ii] == "1") {
                            TP[ii] = "卫星影像"
                        } else if (TP[ii] == "2") {
                            TP[ii] = "核查图片"
                        } else {
                            TP[ii] = "规划图片"
                        }
                    }
                }
                for (var i = 0; i < L - 1; i++) {
                    var NewIMG = document.createElement("img");
                    NewIMG.id = "b" + [i];
                    var GfatherDiv = document.getElementById("a2");
                    GfatherDiv.appendChild(NewIMG);
                    $("#b" + [i]).attr('src', Feng.ctxPath + '/system/previewImage/' + imageId[i])
                    $("#b" + [i]).attr('title', TP[i])
                }
                var IMG = document.querySelectorAll("img");
                let NewL = new Array();
                //等比例缩小放大的函数,需要用异步
                setTimeout(function () {
                    for (var i = 0; i < L; i++) {
                        NewL.push((IMG[i].width / IMG[i].height) * 300)
                    }//因为只用做一张图的，不用这个for
                    ;
                    setTimeout(function () {
                        for (var i = 0; i < L; i++) {
                            IMG[i].style.width = NewL[i] + "px";
                            IMG[i].style.height = "300px"
                        }
                        // $("#photo").css("display", "")
                    }, 1000);
                    carousel.render({
                        elem: '#photo2'
                        , arrow: 'always'
                        , width: "100%"
                        , height: "300px"
                        , indicator: 'inside'
                        , interval: '5000'
                    });
                }, 5000);
            }
        } else {
            $("#xm").css("display", "none");
            $("#xm").removeClass('layui-this')
            $("#tb").addClass('layui-this')
            $("#tbnr").addClass('layui-show')
            $("#xmnr").removeClass('layui-show')
        }
        if (Data.properties.filepath != null) {
            var imageId_array = Data.properties.filepath.split(',');
            var L = imageId_array.length;
            if (Data.properties.fileBusinessType != null) {
                var Type = Data.properties.fileBusinessType.split(',');
                var Len = Type.length;
                for (var ii = 0; ii < Len - 1; ii++) {
                    if (Type[ii] == "1") {
                        Type[ii] = "图斑影像"
                    } else if (Type[ii] == "2") {
                        Type[ii] = "核查图片"
                    } else {
                        Type[ii] = "规划图片"
                    }
                }
            }
            for (var i = 0; i < L - 1; i++) {
                var newImage = document.createElement("img");
                newImage.id = "a" + [i];
                var GfatherDiv = document.getElementById("a");
                GfatherDiv.appendChild(newImage);
                $("#a" + [i]).attr('src', Feng.ctxPath + '/system/previewImage/' + imageId_array[i])
                $("#a" + [i]).attr('title', Type[i])
            }
            var img = document.querySelectorAll("img");
            let FirW = new Array();
            setTimeout(function () {
                for (var i = 0; i < L; i++) {
                    FirW.push((img[i].width / img[i].height) * 300)
                }
                ;
                setTimeout(function () {
                    for (var i = 0; i < L; i++) {
                        img[i].style.width = FirW[i] + "px";
                        img[i].style.height = "300px"
                    }
                    // $("#photo").css("display", "")
                }, 1000);
                carousel.render({
                    elem: '#photo'
                    , arrow: 'always'
                    , width: "100%"
                    , height: "300px"
                    , indicator: 'inside'
                    , interval: '5000'
                });
            }, 5000);
        }
    };

//图斑样式
    function lsylonEachFeature(feature, layer) {
        layer.on({
            click: ClickToCard
        });
        layer.setStyle({
            color: '#DC143C',
            fillColor: '#4B0082',
            Opacity: 1,
            fillOpacity: 0
        })
    }

    function lsylonEachFeature2(feature, layer) {
        layer.on({
            click: ClickToCard
        });
        layer.setStyle({
            color: '#00BFFF',
            fillColor: '#4B0082',
            Opacity: 1,
            fillOpacity: 0
        })
    }

    function scksonEachFeature(feature, layer) {
        layer.on({
            click: ClickToCard
        });
        layer.setStyle({
            color: '#7B68EE'
        })
    }

    function ssltonEachFeature(feature, layer) {
        layer.on({
            click: ClickToCard
        });
        layer.setStyle({
            color: '#00FFFF'
        })
    }

    //异步加载图斑函数

    async function Layeradd(C, B, L1, L2) {
        $("#progress").css("display","")
        console.log("cycle begin")
        for (var i = 0; i < C; i++) {
            var Num = ((i + 1)/C)*100;
            let mypromise = new Promise(function (resolve, reject) {
                setTimeout(function () {
                    element.progress("progrestuban", Num +'%');
                    B.searchnum = i;
                    let ajax = new HttpRequest(Feng.ctxPath + "/map/search/shpdata", 'POST');
                    ajax.set(B);
                    let result = ajax.start();
                    var Lsyl = [];
                    var Lsyl2 = [];
                    for (var m = 0; m < result.data.lsylSearchResultList.length; m++) {
                        var featureTemp = result.data.lsylSearchResultList[m];
                        if (featureTemp.geojson != null) {
                            var WKT = Terraformer.WKT.parse(featureTemp.geojson);
                        }
                        var Obj = new Object();
                        var Obj2 = new Object();
                        if (featureTemp.tbsource == "1") {
                            Obj2.type = "Feature";
                            Obj2.properties = {
                                "popupContent": "辽宁省",
                                "xmlx": "lsyl",
                                "xmmc": featureTemp.xmmc,
                                "xmdd": featureTemp.xmdd,
                                "yszzj": featureTemp.yszzj,
                                "sbzj": featureTemp.sbzj,
                                "xflx": featureTemp.xflx,
                                "zlnd": featureTemp.zlnd,
                                "xmbz": featureTemp.xmbz,
                                "tbmj": featureTemp.tbmj,
                                "tbsource": featureTemp.tbsource,
                                "filepath": featureTemp.fileid,
                                "fileBusinessType": featureTemp.fileBusinessType,
                            };
                            Obj2.id = featureTemp.tbbh;
                            Obj2.geometry = WKT;
                            L2.push(Obj2);
                            Lsyl2.push(Obj2);
                        }
                        Obj.type = "Feature";
                        Obj.properties = {
                            "popupContent": "辽宁省",
                            "xmlx": "lsyl",
                            "xmmc": featureTemp.xmmc,
                            "xmdd": featureTemp.xmdd,
                            "yszzj": featureTemp.yszzj,
                            "sbzj": featureTemp.sbzj,
                            "xflx": featureTemp.xflx,
                            "zlnd": featureTemp.zlnd,
                            "xmbz": featureTemp.xmbz,
                            "tbmj": featureTemp.tbmj,
                            "tbsource": featureTemp.tbsource,
                            "filepath": featureTemp.fileid,
                            "fileBusinessType": featureTemp.fileBusinessType,
                        };
                        Obj.id = featureTemp.tbbh;
                        Obj.geometry = WKT;
                        L1.push(Obj);
                        Lsyl.push(Obj);
                    }
                    L.geoJson(Lsyl, {
                        onEachFeature: lsylonEachFeature
                    }).addTo(MyLayers);
                    L.geoJson(Lsyl2, {
                        onEachFeature: lsylonEachFeature2
                    }).addTo(MyLayers);
                    resolve();
                }, 2000);
            })
            await mypromise
        }
        console.log("cycle finish")
        $("#Btnsearch").attr("disabled", false)
        $("#reset").attr("disabled", false)
        $(".District").unbind()
        $("#progress").css("display","none")
        Feng.success("图斑加载完成！")
    }

    //搜索按钮事件
    var LsylGeoJson = [];
    var ScksGeoJson = [];
    var SsltGeoJson = [];
    var LsylGeoJson2 = [];
    $("#Btnsearch").click(function () {
        LsylGeoJson.length = 0;
        LsylGeoJson2.length = 0;
        ScksGeoJson.length = 0;
        SsltGeoJson.length = 0;
        $("#resultlist").empty();
        form.render()
        if (Object.keys(MyLayers._layers).length != 0) {
            MyLayers.clearLayers()
        }
        var searchconsition = new Object();

        if (Dis.data.userLevel == "县级") {
            searchconsition.region = Countyname
        } else {
            var region = $("#all2").html();
            if (region != "") {
                searchconsition.region = region;
            }
        }
        searchconsition.searchxmlc = "";
        if ($("#SCKS").prop("checked") == true) {
            searchconsition.scks_begin = $("#Sbeginyear").val();
            searchconsition.scks_end = $("#Sendyear").val();
            searchconsition.scks_yxf = $("#SYXF").prop("checked");
            searchconsition.scks_sh = $("#SSH").prop("checked");
            searchconsition.scks_kqbj = $("#SKQBJ").prop("checked");
            searchconsition.searchxmlc = 'scks' + ',';
        }
        if ($("#LSYL").prop("checked") == true) {
            searchconsition.lsyl_begin = $("#Lbeginyear").val();
            searchconsition.lsyl_end = $("#Lendyear").val();
            searchconsition.lsyl_tbbh = $("#Tbbh").val();
            // searchconsition.lsyl_xfz = $("#XFZ").prop("checked");
            searchconsition.lsyl_wxf = $("#WXF").prop("checked");
            searchconsition.lsyl_xf = $("#XF").prop("checked");
            searchconsition.searchxmlc = searchconsition.searchxmlc + 'lsyl' + ',';
        }
        if ($("#SSLT").prop("checked") == true) {
            searchconsition.sslt_begin = $("#SSbeginyear").val();
            searchconsition.sslt_end = $("#SSendyear").val();
            if ($("#SSWC").prop("checked") == true) {
                searchconsition.sslt_finish = 1
            } else if ($("#SSWWC").prop("checked") == true) {
                searchconsition.sslt_finish = 0;
            }
            if ($("#SSZY").prop("checked") == true) {
                searchconsition.sslt_fund = 1
            } else if ($("#SSPT").prop("checked") == true) {
                searchconsition.sslt_fund = 0;
            }
            searchconsition.searchxmlc = searchconsition.searchxmlc + 'sslt' + ',';
        }
        if ($("#TDSH").prop("checked") == true) {
            searchconsition.tdsh_begin = $("#Tbeginyear").val();
            searchconsition.tdsh_end = $("#Tendyear").val();
            if ($("#TWC").prop("checked") == true) {
                searchconsition.tdsh_finish = 1
            } else if ($("#TWWC").prop("checked") == true) {
                searchconsition.tdsh_finish = 0;
            }
            if ($("#TZY").prop("checked") == true) {
                searchconsition.tdsh_fund = 1
            } else if ($("#TPT").prop("checked") == true) {
                searchconsition.tdsh_fund = 0;
            }
            searchconsition.searchxmlc = searchconsition.searchxmlc + 'tdsh' + ',';
        }
        console.log(searchconsition);
//查询数据
        var ajax = new HttpRequest(Feng.ctxPath + "/map/search", 'POST');
        ajax.set(searchconsition);
        var result = ajax.start();
        console.log(result);
        //前端处理
        if (result.data != null) {
            if (result.data.lsylSearchResultList == null && result.data.scksSearchResultList == null && result.data.ssltSearchResultList == null) {
                parent.layer.msg('没有图斑空间数据', {time: 3000});
                $("#cexpand").css("display", "none");
                $("#resultexpand").css("left", "0px");
                $("#search").css("margin-left", "40px")
                $("#resultexpand").css("transform", "rotate(90deg)")
            } else {
                $("#cexpand").css("display", "");
                $("#resultexpand").css("left", "370px");
                $("#search").css("margin-left", "420px")
                $("#resultexpand").css("transform", "rotate(270deg)")
                var Num = 0;
                if (result.data.lsylSearchResultList != null) {
                    var Cycle = Math.ceil(result.data.lsylSearchResultList.length / 500);
                    for (var m = 0; m < result.data.lsylSearchResultList.length; m++) {
                        Num++;
                        var featureTemp = result.data.lsylSearchResultList[m];
                        var resultDome = "<div style=\"max-height: 120px;font-size: 16px\" class=\"layui-form\"><div class=\"layui-form-item\"><span style=\"display: inline-block;white-space: normal;word-break: break-all\">测试数据</span><span style=\"display: inline-block;white-space: normal;word-break: break-all\">测试位置</span></div><div class=\"layui-form-item\"><button type=\"button\" class=\"layui-btn layui-btn-primary\" id=\"test\" name='lsyl'>定位</button></div><hr style=\"height: 3px\"></div>";
                        resultDome = resultDome.replace("测试数据", featureTemp.tbbh);
                        resultDome = resultDome.replace("test", featureTemp.tbbh);
                        resultDome = resultDome.replace("测试位置", featureTemp.wz);
                        var $resultDom = $(resultDome);
                        $resultDom.appendTo($("#resultlist"));
                    }
                    $("#searchNum").html(Num)
                    MyLayers.addTo(gisMap)
                    $("#Btnsearch").attr("disabled", "true")
                    $("#reset").attr("disabled", "true")
                    $(".District").click(function () {
                        console.log("click")
                        Feng.error("图斑加载未完成，请等待！")
                    })
                    Layeradd(Cycle, searchconsition, LsylGeoJson, LsylGeoJson2)
                }
                // if (result.data.scksSearchResultList != null) {
                //
                //     for (var m = 0; m < result.data.scksSearchResultList.length; m++) {
                //         Num++;
                //         var featureTemp = result.data.scksSearchResultList[m];
                //         var resultDome = "<div style=\"max-height: 95px;font-size: 16px\" class=\"layui-form\"><div class=\"layui-form-item\"><span style=\"display: inline-block;white-space: normal;word-break: break-all\">测试数据</span></div><div class=\"layui-form-item\"><button type=\"button\" class=\"layui-btn layui-btn-primary\" id=\"test\" name='scks'>定位</button></div><hr style=\"height: 3px\"></div>";
                //         resultDome = resultDome.replace("test", featureTemp.tbbh);
                //         resultDome = resultDome.replace("测试数据", featureTemp.tbbh);
                //         var $resultDom = $(resultDome);
                //         $resultDom.appendTo($("#resultlist"));
                //         if (featureTemp.geojson != null) {
                //             var WKT = Terraformer.WKT.parse(featureTemp.geojson);
                //         }
                //         var Obj = new Object();
                //         Obj.type = "Feature";
                //         Obj.properties = {
                //             "popupContent": "辽宁省"
                //         };
                //         Obj.id = featureTemp.tbbh;
                //         Obj.geometry = WKT;
                //         ScksGeoJson.push(Obj);
                //     }
                //     var sckslayer = L.geoJson(ScksGeoJson, {
                //         onEachFeature: scksonEachFeature
                //     }).addTo(MyLayers);
                // }
                // if (result.data.ssltSearchResultList != null) {
                //
                //     for (var m = 0; m < result.data.ssltSearchResultList.length; m++) {
                //         Num++;
                //         var featureTemp = result.data.ssltSearchResultList[m];
                //         var resultDome = "<div style=\"max-height: 95px;font-size: 16px\" class=\"layui-form\"><div class=\"layui-form-item\"><span style=\"display: inline-block;white-space: normal;word-break: break-all\">测试数据</span></div><div class=\"layui-form-item\"><button type=\"button\" class=\"layui-btn layui-btn-primary\" id=\"test\" name='sslt'>定位</button></div><hr style=\"height: 3px\"></div>";
                //         resultDome = resultDome.replace("测试数据", featureTemp.tbbh);
                //         resultDome = resultDome.replace("test", featureTemp.tbbh);
                //         var $resultDom = $(resultDome);
                //         $resultDom.appendTo($("#resultlist"));
                //         if (featureTemp.geojson != null) {
                //             var WKT = Terraformer.WKT.parse(featureTemp.geojson);
                //         }
                //         var Obj = new Object();
                //         Obj.type = "Feature";
                //         Obj.properties = {
                //             "popupContent": "辽宁省"
                //         };
                //         Obj.id = featureTemp.tbbh;
                //         Obj.geometry = WKT;
                //         SsltGeoJson.push(Obj);
                //     }
                //     var ssltlayer = L.geoJson(SsltGeoJson, {
                //         onEachFeature: ssltonEachFeature
                //     }).addTo(MyLayers);
                // }
            }
        }
    })
    $("#resultlist").on("click", "button", function (event) {
        console.log(event)
        if (event.currentTarget.name == "scks") {
            var projectid = event.currentTarget.id;
            for (var a = 0; a < ScksGeoJson.length; a++) {
                var id = ScksGeoJson[a].id;
                if (projectid == id) {
                    if (ScksGeoJson[a].geometry == undefined) {
                        parent.layer.msg('没有图斑空间数据', {time: 3000});
                    } else {
                        var bounds = ScksGeoJson[a].geometry.bbox();
                        gisMap.fitBounds([[bounds[1], bounds[0]], [bounds[3], bounds[2]]]);
                    }

                }
            }
        }
        ;
        if (event.currentTarget.name == "lsyl") {
            var projectid = event.currentTarget.id;
            for (var a = 0; a < LsylGeoJson.length; a++) {
                var id = LsylGeoJson[a].id;
                if (projectid == id) {
                    if (LsylGeoJson[a].geometry == undefined) {
                        parent.layer.msg('没有图斑空间数据', {time: 3000});
                    } else {
                        var bounds = LsylGeoJson[a].geometry.bbox();
                        gisMap.fitBounds([[bounds[1], bounds[0]], [bounds[3], bounds[2]]]);
                    }

                }
            }
        }
        ;
        if (event.currentTarget.name == "sslt") {
            var projectid = event.currentTarget.id;
            for (var a = 0; a < SsltGeoJson.length; a++) {
                var id = SsltGeoJson[a].id;
                if (projectid == id) {
                    if (SsltGeoJson[a].geometry == undefined) {
                        parent.layer.msg('没有图斑空间数据', {time: 3000});
                    } else {
                        var bounds = SsltGeoJson[a].geometry.bbox();
                        gisMap.fitBounds([[bounds[1], bounds[0]], [bounds[3], bounds[2]]]);
                    }
                }
            }
        }
    })


    //打开图层选择器
    $("#layerSelBtn").click(function () {

        $(".filterShow").css("display", "none");
        $(".layerShow").css("display", "block");

        // 打开右侧面板
        admin.popupRight({
            type: 1,
            content: $('#layer-content')
        });

    })

    //打开筛选面板
    $("#layerFilterBtn").click(function () {
        $(".filterShow").css("display", "block");
        $(".layerShow").css("display", "none");

        // 打开右侧面板
        admin.popupRight({
            type: 1,
            content: $('#layer-content')
        });

    });

    $("#dropdown-menu-nav").on("click", "li", function () {
        $(".filter-group.show").removeClass("show").addClass("hide");
        $("#" + $(this).attr("data-layer") + "_filter").addClass("show").removeClass("hide");
        $(".active-layer").text($(this).text());

        $(".dropdown-menu").removeClass("dropdown-open");
    });


    $(".filter-item").click(function () {
        $(this).siblings().removeClass("active");
        $(this).addClass("active");
    });

    /*右侧筛选按钮*/
    $("#filterBtn").click(function () {
        var params = {};
        var layerId = null;
        $(".filter-group.show li.active").each(function () {
            var code = $(this).attr("data-type");
            var value = $(this).attr("data-value");
            if (layerId == null) {
                layerId = $(this).attr("data-layer");
            }
            if (value != -1) {
                params[code] = value;
            }
        });

        if (gisMap.findLayerById(layerId) == null) {
            mui.toast("请先加载图层");
            return;
        }

        var layerConfig = layers[layerId];
        gisMap.remove(layerConfig.layer);
        searchFeatures[layerId] = [];
        drawLayer(layerId, params);


        gisMap.on('mousemove', (e) => {
            let latlng = e.latlng;
            $("#lng").text(latlng.lng.toFixed(8));
            $("#lat").text(latlng.lat.toFixed(8));
        });
    });


    function drawLayer(layerId, params) {
        var layerConfig = layers[layerId];

        if (params == null) {
            params = {};
            for (let i = 0; i < layerItems.length; i++) {
                for (let j = 0; j < layerItems[i].layers.length; j++) {
                    var item = layerItems[i].layers[j];

                    if (item.id == layerId) {
                        for (let k = 0; k < item.filterGroup.length; k++) {
                            var _filter = item.filterGroup[k];
                            if (_filter.active != -1) {
                                params[_filter.code] = _filter.active;
                            }
                        }
                    } else {
                        continue;
                    }
                }
            }
        }

        var geometryType = 'point';

        if (layerConfig.geometryType != undefined) {
            geometryType = layerConfig.geometryType;
        }

        var layer = new GeoJSONLayer({
            id: layerId,
            title: layerConfig.title,
            url: "/map/layer/getLayerByName?name=" + layerId + "&parms=" + JSON.stringify(params),
            outFields: ["*"],
            renderer: layerConfig.renderer,
            labelingInfo: layerConfig.labelingInfo,
            popupTemplate: layerConfig.popupTemplate,
            geometryType: geometryType
        });
        layerConfig.layer = layer;
        gisMap.add(layer);

        layer.queryFeatures().then(function (results) {
            $("#statis .statis-label").text(layerConfig.title);
            $("#statis .statis-num").text(results.features.length);
            searchFeatures[layerId] = results.features;

        });
    }

    function createLabel(data, _graphics) {
        for (var i = 0; i < data.length; i++) {
            var b = new Graphic({
                attributes: {
                    name: "测试"
                },
                geometry: webMercatorUtils.geographicToWebMercator({
                    type: 'point',
                    x: data[i].lat,
                    y: data[i].lng,
                    spatialReference: new SpatialReference(4326)
                }),
                dom: `<div class="infowindow quality-one" data-code="${data[i].code}" data-type="sz-auto"><div class="window">
                  <span class="regin">${data[i].fj}-${data[i].glc}</span>
				  <div class="title">
					<div>自动</div>
					<div><span class="name">${data[i].name}</span><span class="type">&nbsp;&nbsp;水质等级</span><span class="num" rel="类">Ⅰ</span></div></div>
                  <span class="no">${data[i].code}</span>
                  <span class="time">2021-03-11 08:00</span>
                  <div class="footer"></div></div></div>`,
                grade: "1"
            });
            _graphics.push(b)
        }
    }


    // function initLayerDom() {
    //     var html = "";
    //     for (var i = 0; i < layerItems.length; i++) {
    //         var label = "<div class='item'><label class='mui-input-row'>" + layerItems[i].title + "</label>";
    //         var form = "<form class='mui-input-group layergroup'>";
    //
    //         for (var j = 0; j < layerItems[i].layers.length; j++) {
    //             var item = layerItems[i].layers[j];
    //
    //             var checked = "";
    //             if (item.checked) {
    //                 checked = "checked";
    //                 $(".active-layer").text(item.title);
    //             }
    //             form = form +
    //                 "<div class='mui-input-row mui-checkbox'><label><span class='icon mui-icon iconfont " + item.icon +
    //                 "' style='color: " + iconColor[j % 4] + ";'></span>" + item.title +
    //                 "</label> <input value='" + item.id +
    //                 "' type='checkbox' " + checked + "></div>";
    //
    //             if (item.filterGroup.length != 0) {
    //
    //                 $("<li data-layer='" + item.id + "'><a>" + item.title + "</a></li>").appendTo($("#dropdown-menu-nav"));
    //                 var show = "hide";
    //                 if (item.checked) {
    //                     show = "show";
    //                 }
    //                 var $tmpHtml = $("<div class='filter-group " + show + "' id='" + item.id +
    //                     "_filter'></div>");
    //                 for (var k = 0; k < item.filterGroup.length; k++) {
    //                     var fgItem = item.filterGroup[k];
    //
    //                     var $fcDom = $("<div class='filter-group-content'></div>");
    //                     var $ul = $("<ul></ul>")
    //                     for (var n = 0; n < fgItem.values.length; n++) {
    //
    //                         var vItem = fgItem.values[n];
    //                         var active = "";
    //                         if (fgItem.active == vItem.value) {
    //                             active = "active";
    //                         }
    //
    //                         $("<li class='filter-item " + active + "' data-value='" +
    //                             vItem.value + "' data-type='" + fgItem.code + "' data-layer='" + item.id + "'>" + vItem
    //                                 .text + "</li>").appendTo($ul);
    //                     }
    //                     $ul.appendTo($fcDom);
    //                     $("<div class='filter-group-header'>" + fgItem.name + "</div>").appendTo($tmpHtml);
    //                     $fcDom.appendTo($tmpHtml);
    //                 }
    //                 $tmpHtml.appendTo($(".filter-content"))
    //             }
    //
    //         }
    //         html = html + label + form + "</form></div>"
    //     }
    //
    //     $(html).appendTo($("#layerGroup"));
    // }


    function parseData(input) {
        const decoder = new TextDecoder('utf8')
        return JSON.parse(decoder.decode(input))
    }

    function toArrayBuffer(input) {
        const encoder = new TextEncoder()
        const view = encoder.encode(input)
        return view.buffer
    }

    // initLayerDom();
});

